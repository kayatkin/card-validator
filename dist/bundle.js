(()=>{function t(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(t){u=!0,a=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(t,r)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var r=document.getElementById("card-number-input"),n=document.getElementById("validate-button"),a=document.getElementById("payment-system-info"),o={Visa:/^4[0-9]{12}(?:[0-9]{3})?$/,MasterCard:/^5[1-5][0-9]{14}$/,"American Express":/^3[47][0-9]{13}$/,Discover:/^6(?:011|5[0-9]{2})[0-9]{12}$/,JCB:/^(?:2131|1800|35\d{3})\d{11}$/,"Diners Club":/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,Mir:/^220[0-4][0-9]{12}$/},i=document.querySelectorAll(".card-icon");r.addEventListener("input",(function(){!function(){var e=r.value.replace(/\s/g,"");i.forEach((function(t){return t.classList.remove("active")}));for(var n=0,a=Object.entries(o);n<a.length;n++){var l=t(a[n],2),c=l[0];if(l[1].test(e)){var u=document.querySelector('[data-system="'.concat(c,'"]'));u&&u.classList.add("active");break}}}()})),n.addEventListener("click",(function(){var e=function(e){var r=e.replace(/\D/g,"");if(r.length<13||r.length>19)return{valid:!1,issuer:"Unknown"};var n=function(t){for(var e=0,r=!1,n=t.length-1;n>=0;n--){var a=parseInt(t.charAt(n),10);r&&(a*=2)>9&&(a-=9),e+=a,r=!r}return e%10==0}(r),a="Unknown";if(parseInt(r.charAt(0),10),parseInt(r.substring(0,2),10),n)for(var i=0,l=Object.entries(o);i<l.length;i++){var c=t(l[i],2),u=c[0];if(c[1].test(r)){a=u;break}}return{valid:n,issuer:a}}(r.value);e.valid?(a.textContent="Платежная система: ".concat(e.issuer),a.style.color="green"):(a.textContent="Неверный номер карты",a.style.color="red")}))})();